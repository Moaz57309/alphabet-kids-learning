<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø­Ø±ÙˆÙ - ÙƒÙŠ Ø¬ÙŠ</title>
<style>
  body{font-family: "Segoe UI", Tahoma, Arial; direction: rtl; text-align: center; padding: 12px; background:#f8f9fb}
  h1{margin:6px 0 12px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(64px,1fr));gap:8px;max-width:760px;margin:0 auto}
  .card{background:white;border-radius:8px;padding:12px;box-shadow:0 1px 4px rgba(0,0,0,.08);cursor:pointer}
  .letter{font-size:28px;font-weight:700}
  .example{font-size:12px;color:#555;margin-top:6px}
  .controls{margin:14px 0;display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
  button{padding:8px 12px;border-radius:8px;border:0;background:#0b5ed7;color:white;cursor:pointer}
  button.secondary{background:#6c757d}
  #big{font-size:84px;margin:18px 0}
  .quizBox{max-width:420px;margin:0 auto;background:#fff;padding:14px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.08)}
  .option{display:block;margin:8px 0;padding:8px;border-radius:8px;background:#eef2ff;cursor:pointer}
  .hidden{display:none}
</style>
</head>
<body>
  <h1>ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø­Ø±ÙˆÙ Ù„Ù„Ø£Ø·ÙØ§Ù„ â€” ÙƒÙŠ Ø¬ÙŠ</h1>
  <div class="controls">
    <button id="speakAll">Ø´ØºÙ„ Ø§Ù„Ù†Ø·Ù‚ Ù„ÙƒÙ„ Ø­Ø±Ù</button>
    <button id="startQuiz">Ø§Ø¨Ø¯Ø£ Ø§Ø®ØªØ¨Ø§Ø±</button>
    <button id="shuffle" class="secondary">Ø®Ù„Ø· Ø§Ù„Ø­Ø±ÙˆÙ</button>
  </div>

  <div id="big" class="hidden"></div>

  <div id="grid" class="grid"></div>

  <!-- Quiz UI -->
  <div id="quiz" class="hidden quizBox">
    <p id="quizPrompt">Ø§Ø³ØªÙ…Ø¹ Ù„Ù„ØµÙˆØª ÙˆØ§Ø®ØªØ± Ø§Ù„Ø­Ø±Ù Ø§Ù„ØµØ­ÙŠØ­</p>
    <button id="playSound">ğŸ”Š Ø§Ø³ØªÙ…Ø¹</button>
    <div id="options"></div>
    <p id="score" style="margin-top:8px"></p>
    <div style="margin-top:8px">
      <button id="nextQ" class="secondary">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
      <button id="endQuiz" class="secondary">Ø§Ù†Ù‡ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
    </div>
  </div>

<script>
// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø±ÙˆÙ (28 Ø­Ø±Ù) + Ù…Ø«Ø§Ù„ ÙƒÙ„Ù…Ø© Ù‚ØµÙŠØ±Ø© (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„/Ø¥Ø¶Ø§ÙØ© ØµÙˆØ± Ù„Ø§Ø­Ù‚Ø§Ù‹)
const letters = [
  {ltr:'Ø§', word:'Ø£Ø³Ø¯'}, {ltr:'Ø¨', word:'Ø¨Ø§Ø¨'}, {ltr:'Øª', word:'ØªÙØ§Ø­'},
  {ltr:'Ø«', word:'Ø«Ø¹Ù„Ø¨'}, {ltr:'Ø¬', word:'Ø¬Ù…Ù„'}, {ltr:'Ø­', word:'Ø­ØµØ§Ù†'},
  {ltr:'Ø®', word:'Ø®Ø¨Ø²'}, {ltr:'Ø¯', word:'Ø¯Ø¨'}, {ltr:'Ø°', word:'Ø°Ù‡Ø¨'},
  {ltr:'Ø±', word:'Ø±Ù…Ø§Ù†'}, {ltr:'Ø²', word:'Ø²Ø±Ø§ÙØ©'}, {ltr:'Ø³', word:'Ø³Ù…Ùƒ'},
  {ltr:'Ø´', word:'Ø´Ù…Ø¹Ø©'}, {ltr:'Øµ', word:'ØµÙ‚Ø±'}, {ltr:'Ø¶', word:'Ø¶ÙØ¯Ø¹'},
  {ltr:'Ø·', word:'Ø·Ø§Ø¦Ø±'}, {ltr:'Ø¸', word:'Ø¸Ø±Ù'}, {ltr:'Ø¹', word:'Ø¹Ù†Ø¨'},
  {ltr:'Øº', word:'ØºØ²Ø§Ù„'}, {ltr:'Ù', word:'ÙÙŠÙ„'}, {ltr:'Ù‚', word:'Ù‚Ù…Ø±'},
  {ltr:'Ùƒ', word:'ÙƒØªØ§Ø¨'}, {ltr:'Ù„', word:'Ù„ÙŠÙ…ÙˆÙ†'}, {ltr:'Ù…', word:'Ù…ÙˆØ²'},
  {ltr:'Ù†', word:'Ù†Ù…Ù„'}, {ltr:'Ù‡', word:'Ù‡Ø¯Ù‡Ø¯'}, {ltr:'Ùˆ', word:'ÙˆØ±Ø¯Ø©'},
  {ltr:'ÙŠ', word:'ÙŠÙ‚Ø·ÙŠÙ†'}
];

const grid = document.getElementById('grid');
const big = document.getElementById('big');
const synth = window.speechSynthesis;

// Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø­Ø±ÙˆÙ
function renderGrid(arr){
  grid.innerHTML = '';
  arr.forEach((item, idx) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<div class="letter">${item.ltr}</div><div class="example">${item.word}</div>`;
    card.onclick = () => { showBig(item); speakText(item.ltr + ' ... ' + item.word); };
    grid.appendChild(card);
  });
}
renderGrid(letters);

// Ø¹Ø±Ø¶ Ø­Ø±Ù ÙƒØ¨ÙŠØ±
function showBig(item){
  big.classList.remove('hidden');
  big.textContent = item.ltr;
  setTimeout(()=> big.classList.add('hidden'), 2500);
}

// Ù†Ø·Ù‚ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Web Speech API (ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ù…ØªØµÙØ­ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
function speakText(text){
  if(!('speechSynthesis' in window)) return alert('Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ');
  synth.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'ar-SA';
  u.rate = 0.9;
  u.pitch = 1;
  synth.speak(u);
}

// Ø²Ø± Ø´ØºÙ„ Ø§Ù„Ù†Ø·Ù‚ Ù„ÙƒÙ„ Ø­Ø±Ù Ù…ØªØªØ§Ù„ÙŠØ§Ù‹
document.getElementById('speakAll').onclick = async () => {
  for(const item of letters){
    speakText(item.ltr + ' ... ' + item.word);
    // Ù†ÙØµÙ„ Ø²Ù…Ù†ÙŠÙ‹Ø§ Ø¨ÙŠÙ† ÙƒÙ„ Ø­Ø±Ù
    await new Promise(r => setTimeout(r, 900));
  }
};

// Ø®Ù„Ø· Ø§Ù„Ø­Ø±ÙˆÙ
document.getElementById('shuffle').onclick = () => {
  const shuffled = [...letters].sort(()=>Math.random()-0.5);
  renderGrid(shuffled);
};

// ------ Quiz Ø¨Ø³ÙŠØ· ------
const quizBox = document.getElementById('quiz');
const startQuizBtn = document.getElementById('startQuiz');
const playSoundBtn = document.getElementById('playSound');
const optionsDiv = document.getElementById('options');
const scoreP = document.getElementById('score');
const nextQ = document.getElementById('nextQ');
const endQuiz = document.getElementById('endQuiz');

let quizState = {questions:[], current:0, score:0};

// Ø§Ù†Ø´Ø§Ø¡ Ø£Ø³Ø¦Ù„Ø© (Ù…Ø«Ø§Ù„: 8 Ø£Ø³Ø¦Ù„Ø©)
function prepareQuiz(num=8){
  const pool = [...letters];
  const qs = [];
  for(let i=0;i<num;i++){
    if(pool.length===0) pool.push(...letters);
    const correct = pool.splice(Math.floor(Math.random()*pool.length),1)[0];
    // Ø§Ø®ØªØ± 3 Ø®ÙŠØ§Ø±Ø§Øª Ø®Ø§Ø·Ø¦Ø©
    const wrongs = [];
    while(wrongs.length<3){
      const cand = letters[Math.floor(Math.random()*letters.length)];
      if(cand.ltr !== correct.ltr && !wrongs.includes(cand)) wrongs.push(cand);
    }
    const choices = [correct, ...wrongs].sort(()=>Math.random()-0.5);
    qs.push({correct, choices});
  }
  return qs;
}

function startQuiz(){
  quizState.questions = prepareQuiz(8);
  quizState.current = 0;
  quizState.score = 0;
  quizBox.classList.remove('hidden');
  grid.classList.add('hidden');
  showQuestion();
}

function showQuestion(){
  const q = quizState.questions[quizState.current];
  optionsDiv.innerHTML = '';
  q.choices.forEach(c=>{
    const b = document.createElement('button');
    b.className='option';
    b.textContent = c.ltr + ' â€” ' + c.word;
    b.onclick = () => selectOption(c);
    optionsDiv.appendChild(b);
  });
  scoreP.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${quizState.current+1} Ù…Ù† ${quizState.questions.length} â€” Ù†Ù‚Ø§Ø·: ${quizState.score}`;
  // Ø´ØºÙ„ Ø§Ù„ØµÙˆØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
  speakPlayCorrect();
}

function speakPlayCorrect(){
  const q = quizState.questions[quizState.current];
  // Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø© Ø£Ùˆ Ø§Ù„Ø­Ø±Ù ÙÙ‚Ø· (Ù‡Ù†Ø§ Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø© Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø³Ù…Ø¹)
  speakText(q.correct.word);
}

function selectOption(choice){
  const q = quizState.questions[quizState.current];
  if(choice.ltr === q.correct.ltr){
    quizState.score++;
    alert('ØµØ­ÙŠØ­! ğŸ‘');
  } else {
    alert('Ø®Ø·Ø£ â€” Ø§Ù„Ø­Ø±Ù Ø§Ù„ØµØ­ÙŠØ­: ' + q.correct.ltr + ' (' + q.correct.word + ')');
  }
  // Ø¥Ù…Ø§ Ù†Ù†ØªÙ‚Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ Ø£Ùˆ Ù†Ù†Ù‡ÙŠ
}

playSoundBtn.onclick = () => speakPlayCorrect();

nextQ.onclick = () => {
  quizState.current++;
  if(quizState.current >= quizState.questions.length){
    alert('Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±. Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø·Ùƒ: ' + quizState.score + ' Ù…Ù† ' + quizState.questions.length);
    endQuizFunc();
    return;
  }
  showQuestion();
};

endQuiz.onclick = () => endQuizFunc();

function endQuizFunc(){
  quizBox.classList.add('hidden');
  grid.classList.remove('hidden');
}

startQuizBtn.onclick = startQuiz;

</script>
</body>
</html>
